<header class="header">
  <div class="header__container">
    <a routerLink="/" class="header__logo">
      <img src="/images/logo.svg" alt="Site logo" />
    </a>
    <div class="block md:hidden">
      <button
        size="s"
        tuiIconButton
        appearance="icon"
        icon="icons/navigate.svg"
        (click)="showDropdownDialog(navigationDropdown)"
      ></button>
    </div>
    <div class="ml-3 hidden md:order-none md:ml-6 md:block">
      <tui-hosted-dropdown
        [content]="navigationDropdown"
        tuiDropdownLimitWidth="auto"
        [tuiDropdownMinHeight]="200"
        [tuiDropdownMaxHeight]="300"
      >
        <button class="flex items-center">
          <button
            size="s"
            tuiIconButton
            appearance="icon"
            icon="icons/navigate.svg"
          ></button>
          <span class="pl-2 text-lg"> Ташкент </span>
        </button>
      </tui-hosted-dropdown>
    </div>
    <div class="md:ml-auto">
      <div class="hidden md:block">
        <tui-hosted-dropdown
          [content]="searchDropdown"
          tuiDropdownAlign="center"
          [tuiDropdownMaxHeight]="300"
          [tuiDropdownMinHeight]="200"
        >
          <button
            size="s"
            tuiIconButton
            appearance="icon"
            icon="icons/search.svg"
          ></button>
        </tui-hosted-dropdown>
      </div>
      <div class="block md:hidden">
        <button
          size="s"
          tuiIconButton
          appearance="icon"
          icon="icons/search.svg"
          (click)="showDropdownDialog(searchDropdown)"
        ></button>
      </div>
    </div>
    <div class="hidden md:block">
      <tui-badged-content
        size="xs"
        colorTop="var(--tui-primary)"
        [contentTop]="22"
      >
        <button
          size="s"
          tuiIconButton
          appearance="icon"
          routerLink="/favorites"
          icon="icons/heart.svg"
        ></button>
      </tui-badged-content>
    </div>
    <div class="hidden md:block">
      <tui-hosted-dropdown
        [content]="notificationDropdown"
        [tuiDropdownMaxHeight]="300"
        tuiDropdownLimitWidth="auto"
      >
        <tui-badged-content
          size="xs"
          colorTop="var(--tui-primary)"
          [contentTop]="9"
        >
          <button
            size="s"
            tuiIconButton
            appearance="icon"
            icon="icons/notification.svg"
          ></button>
        </tui-badged-content>
      </tui-hosted-dropdown>
    </div>
    <tui-hosted-dropdown class="header__lng" [content]="lngDropdown">
      <ion-button color="light" shape="round">
        <img
          class="h-[20px] w-[20px] rounded-full object-cover"
          [src]="'images/flags/' + 'ru' + '.svg'"
          alt="Site Language"
        />
        <span class="pl-2">Ру</span>
      </ion-button>
    </tui-hosted-dropdown>
    <ng-container *ngIf="!authService.isLoggedIn">
      <div class="hidden md:block">
        <button size="m" shape="rounded" routerLink="/auth" tuiButton>
          <span class="font-medium">Войти</span>
        </button>
      </div>
    </ng-container>
    <ng-container *ngIf="authService.isLoggedIn">
      <div class="hidden md:block">
        <button size="m" shape="rounded" routerLink="/profile" tuiButton>
          <span class="font-medium">user</span>
        </button>
      </div>
    </ng-container>
  </div>
</header>

<ng-template #navigationDropdown>
  <div class="min-w-[250px] p-2">
    <tui-input
      [formControl]=""
      tuiTextfieldSize="m"
      [tuiTextfieldLabelOutside]="true"
      tuiTextfieldIcon="icons/search.svg"
    >
      Поиск
      <input tuiTextfield />
    </tui-input>
    <tui-data-list>
      <tui-opt-group class="grid gap-1">
        <button tuiOption>
          <span class="text-sm font-medium">Ташкент</span>
        </button>
        <button tuiOption>
          <span class="text-sm font-medium">Ташкент</span>
        </button>
        <button tuiOption>
          <span class="text-sm font-medium">Ташкент</span>
        </button>
        <button tuiOption>
          <span class="text-sm font-medium">Ташкент</span>
        </button>
        <button tuiOption>
          <span class="text-sm font-medium">Ташкент</span>
        </button>
      </tui-opt-group>
    </tui-data-list>
  </div>
</ng-template>

<ng-template #searchDropdown>
  <div class="min-w-[250px] p-2">
    <tui-input
      tuiTextfieldSize="m"
      [tuiTextfieldLabelOutside]="true"
      tuiTextfieldIcon="icons/search.svg"
      [formControl]=""
    >
      Поиск
      <input tuiTextfield />
    </tui-input>
    <ion-grid class="mt-3 grid min-h-[300px] content-start gap-4">
      <ion-item
        lines="none"
        class="cursor-pointer p-0 hover:[&>ion-label]:text-primary"
      >
        <ion-avatar slot="start" class="mr-5 h-[50px] w-[50px]">
          <img class="rounded-lg" src="images/executor-01.jpg" alt="" />
        </ion-avatar>
        <ion-label>
          <h3 class="transition-colors">
            <b class="font-semibold">Аварийный электрик</b>
          </h3>
          <p>Электрика</p>
        </ion-label>
      </ion-item>
      <ion-item
        lines="none"
        class="cursor-pointer p-0 hover:[&>ion-label]:text-[--primary]"
      >
        <ion-avatar slot="start" class="mr-5 h-[50px] w-[50px]">
          <img class="rounded-lg" src="images/executor-02.jpg" alt="" />
        </ion-avatar>
        <ion-label>
          <h3 class="transition-colors">
            <b class="font-semibold">Розетки и выключатели</b>
          </h3>
          <p>Электрика</p>
        </ion-label>
      </ion-item>
    </ion-grid>
  </div>
</ng-template>

<ng-template #notificationDropdown>
  <div class="p-2 md:max-w-xs">
    <ion-grid class="grid content-start gap-3">
      <tui-island class="island cursor-pointer">
        <tui-line-clamp
          content="Daenerys of the House Targaryen, the First of Her Name, The Unburnt"
          [lineHeight]="22"
          [linesLimit]="2"
        ></tui-line-clamp>
        <ion-note class="block pt-4">1 день назад</ion-note>
      </tui-island>
      <tui-island class="island cursor-pointer">
        <tui-line-clamp
          content="Daenerys of the House Targaryen, the First of Her Name, The Unburnt"
          [lineHeight]="22"
          [linesLimit]="2"
        ></tui-line-clamp>
        <ion-note class="block pt-4">1 день назад</ion-note>
      </tui-island>
    </ion-grid>
  </div>
</ng-template>

<ng-template #lngDropdown>
  <tui-data-list>
    <tui-opt-group>
      <button tuiOption>
        <img
          class="h-[20px] w-[20px] rounded-full object-cover"
          [src]="'images/flags/' + 'ru' + '.svg'"
        />
        <span class="pl-2">Ру</span>
      </button>
      <button tuiOption>
        <img
          class="h-[20px] w-[20px] rounded-full object-cover"
          [src]="'images/flags/' + 'uz' + '.svg'"
        />
        <span class="pl-2">Уз</span>
      </button>
      <button tuiOption>
        <img
          class="h-[20px] w-[20px] rounded-full object-cover"
          [src]="'images/flags/' + 'uz' + '.svg'"
        />
        <span class="pl-2">O’z</span>
      </button>
    </tui-opt-group>
  </tui-data-list>
</ng-template>
